<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Wordpress - Sprie Widget Docs</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://docs.sprie.io/favicon.ico><link rel=stylesheet href=/css/style.min.6719d72e323121369d5caeb4264b95d8a63cf1deaab029da67602fe5a046e0a4.css></head><body class='page page-default-single'><div id=main-menu-mobile class=main-menu-mobile><ul><li class=menu-item-home><a href=/><span>Home</span></a></li><li class=menu-item-docs><a href=/docs/><span>Docs</span></a></li></ul></div><div class=wrapper><div class=header><div class=container><div class=logo><a href=https://docs.sprie.io><img alt=Logo src=/images/logo.png></a></div><div class=logo-mobile><a href=https://docs.sprie.io><img alt=Logo src=/images/logo.png></a></div><div id=main-menu class=main-menu><ul><li class=menu-item-home><a href=/><span>Home</span></a></li><li class=menu-item-docs><a href=/docs/><span>Docs</span></a></li></ul></div><button id=toggle-main-menu-mobile class="hamburger hamburger--slider" type=button>
<span class=hamburger-box><span class=hamburger-inner></span></span></button></div></div><div class="container pt-2 pt-md-6 pb-3 pb-md-6"><div class=row><div class="col-12 col-md-3 mb-3"><div class=sidebar><div class=docs-menu><h4>Docs</h4><ul><li><a href=https://docs.sprie.io/docs/concept/>Concepts</a></li><li><a href=https://docs.sprie.io/docs/quick-start/>Quick Start Guide</a></li><li><a href=https://docs.sprie.io/docs/events/>Events</a></li><li><a href=https://docs.sprie.io/docs/methods/>Methods</a></li><li class=active><a href=https://docs.sprie.io/docs/wordpress/>Wordpress</a></li><li><a href=https://docs.sprie.io/docs/shopify/>Shopify</a></li><li><a href=https://docs.sprie.io/docs/react/>React</a></li><li><a href=https://docs.sprie.io/docs/embed/>SprieEmbed</a></li><li><a href=https://docs.sprie.io/docs/troubleshoot/>Troubleshoot</a></li></ul></div></div></div><div class="col-12 col-md-9"><h1 class=title>Wordpress</h1><div class=content><h2 id=demo>Demo</h2><p>Demo Link : <code>https://demo-wordpress.sprie.io/</code><br>Wordpress Plugin : Coming soon!</p><p>A typical wordpress + wooCommerce setup will consist of lots of php files and a server side theme based framework. All the activities in Sprie happen in front end. What we can do is break the typical Sprie Workflow into several .php files so that they all take care of specific actions on specific intents.</p><h2 id=workflow>Workflow</h2><ol><li>Initialize Sprie Widget at a common place</li><li>Translate skus from objects ids</li><li>Check if this item is registered with Sprie or not.</li><li>Add to Cart</li><li>Create a Button &lsquo;Try Now&rsquo; on the product page & trigger 3D AR Preview</li></ol><h2 id=implementation>Implementation</h2><p>All the implementation work requires you to edit php files, right off the admin editor:</p><ol><li>Go to your wp-admin page and login (<code>https://www.yourcompany.com/wp-admin/</code>)</li><li>Appearance > Theme File Editor</li><li>Edit/update/insert the code and click on <code>Update File</code>.</li></ol><h3 id=initialize-sprie-widget>Initialize Sprie Widget</h3><p>We would want to Initialize Sprie Widget in a place where that particular part of html gets rendered on every single page.
&lsquo;footer.php&rsquo; is a very good way to start initializing the widget.
Insert the following code in <code>footer.php</code> file, after <code>&lt;?php wp_footer(); ?></code> :</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-HTML data-lang=HTML><span class=line><span class=cl><span class=c>&lt;!-- STEP 1. Load Sprie CDN Script with api key (most preferred way to integrate )--&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/@perceptimagery/sprie-widget@latest?apikey={apikey}&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><h3 id=write-sku-translator>Write SKU Translator</h3><p>We need a way to send the SKUs to the <code>Load</code> method of the widget to show it properly. Most often times, the SKUs are pre-registered during asset onboard process with Sprie. To acquire the proper SKUs:</p><ol><li>Either it can be generated uniquely and sent over to Sprie in a CSV,</li><li>or, just use the url param of a current item in a PDP ( Product Display Page).</li></ol><p>To use thr url-param as sku, we would need to translate the <code>url</code> into an <code>sku</code>. Write the following code in <code>footer.php</code> file after you have initialized Sprie Widget :</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-HTML data-lang=HTML><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=c1>// Fetch Product Specific Data
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kr>const</span> <span class=nx>urlPath</span> <span class=o>=</span> <span class=nb>window</span><span class=p>.</span><span class=nx>location</span><span class=p>.</span><span class=nx>pathname</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=kr>const</span> <span class=nx>productSku</span> <span class=o>=</span> <span class=nx>urlPath</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=s1>&#39;product/&#39;</span><span class=p>)</span><span class=o>&gt;=</span><span class=mi>0</span> <span class=o>?</span> <span class=nx>urlPath</span><span class=p>.</span><span class=nx>replace</span><span class=p>(</span><span class=s1>&#39;product&#39;</span><span class=p>,</span><span class=s1>&#39;&#39;</span><span class=p>).</span><span class=nx>replaceAll</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>,</span><span class=s1>&#39;&#39;</span><span class=p>).</span><span class=nx>trim</span><span class=p>()</span> <span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>productSprieReady</span> <span class=o>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>What we are essentially doing here is stripping the url param path and just taking the url id and storing it as <code>productSku</code> so that when we reach a PDP, <code>productSprieReady</code> automatically gets set to true, and we can continue to show the widget.</p><h3 id=check-item-sku-registration-with-sprie>Check Item sku registration with Sprie</h3><p>From the above step, we get a sku for a specific product which we want to run through Sprie Check. Now Sprie authentication happens under the hood with the api key provided, and its a asynchronous task. Sprie exposes certain <a href=https://docs.sprie.io/docs/events>events</a> to let the developers know when certain actions happen, and how to listen to them.<br>In this case, we tap on to <code>onSDKReady</code> event to know when the authentication is done and Sprie is ready for use. Put the below code in the same <code>footer.php</code> file after the above step.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-HTML data-lang=HTML><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nb>document</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;SprieEvent:onSDKReady&#34;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>e</span><span class=p>){</span>
</span></span><span class=line><span class=cl>		<span class=c1>// Check product registration if inside product page
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=k>if</span><span class=p>(</span><span class=nx>productSku</span><span class=p>){</span>
</span></span><span class=line><span class=cl>			<span class=nx>SprieSDK</span><span class=p>.</span><span class=nx>CheckSKU</span><span class=p>(</span><span class=nx>productSku</span><span class=p>).</span><span class=nx>then</span><span class=p>(</span><span class=nx>checkResult</span><span class=p>=&gt;{</span>
</span></span><span class=line><span class=cl>				<span class=kd>var</span> <span class=nx>event</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Event</span><span class=p>(</span><span class=s1>&#39;SprieEvent:onCheckAssetSKU&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>bubbles</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=nx>cancelable</span><span class=o>:</span> <span class=kc>false</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>				<span class=nx>productSprieReady</span> <span class=o>=</span> <span class=nx>checkResult</span><span class=p>[</span><span class=nx>productSku</span><span class=p>];</span>
</span></span><span class=line><span class=cl>				<span class=nb>window</span><span class=p>.</span><span class=nx>dispatchEvent</span><span class=p>(</span><span class=nx>event</span><span class=p>);</span>
</span></span><span class=line><span class=cl>			<span class=p>});</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>Here, what we are doing is listening to <code>onSDKReady</code> event, then checking of productSku is not null, and then using <a href=https://docs.sprie.io/docs/methods>Sprie Methods</a> to check product registration with Sprie. Once the result is received, we create a custom client event and dispatch the result so that the event can be later on received and &lsquo;Try Now&rsquo; Button can be showed.</p><h3 id=handle-add-to-cart>Handle Add to Cart</h3><p>Sprie offers a Add to Cart CTA on the widget which raises an event with the specific product SKU. You can listen to the event and decide what to do with the Event itself. The reason we do not provide any backend action is because Sprie simply doesn&rsquo;t depend/ bother the framework you are working on and leaves it up to you to decide how you want to implement it.
As an example, in Wordpress + Woocommerce setup, you can add it to card in the following way :</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-HTML data-lang=HTML><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nb>document</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;SprieEvent:onAssetCart&#34;</span><span class=p>,</span> <span class=p>(</span><span class=nx>e</span><span class=p>)=&gt;{</span>
</span></span><span class=line><span class=cl>		<span class=kr>const</span> <span class=nx>sku2id</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;centena-bert-gunmetal&#39;</span><span class=o>:</span><span class=mi>12</span><span class=p>,</span> <span class=s1>&#39;mattecentena-jarvis-mattetortoise&#39;</span><span class=o>:</span> <span class=mi>14</span><span class=p>};</span>
</span></span><span class=line><span class=cl>		<span class=kd>var</span> <span class=nx>_nonce</span> <span class=o>=</span> <span class=s2>&#34;&lt;?php echo wp_create_nonce( &#39;wc_store_api&#39; ); ?&gt;&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=nx>jQuery</span><span class=p>.</span><span class=nx>ajax</span><span class=p>({</span>
</span></span><span class=line><span class=cl>		  <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;POST&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		  <span class=nx>url</span><span class=o>:</span> <span class=s1>&#39;/wp-json/wc/store/cart/add-item&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		  <span class=nx>dataType</span><span class=o>:</span> <span class=s1>&#39;json&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		  <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=s1>&#39;X-WC-Store-API-Nonce&#39;</span><span class=o>:</span> <span class=nx>_nonce</span>
</span></span><span class=line><span class=cl>		  <span class=p>},</span>
</span></span><span class=line><span class=cl>		  <span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nx>id</span> <span class=o>:</span> <span class=nx>sku2id</span><span class=p>[</span><span class=nx>e</span><span class=p>.</span><span class=nx>detail</span><span class=p>.</span><span class=nx>sku</span><span class=p>],</span>
</span></span><span class=line><span class=cl>			<span class=nx>quantity</span><span class=o>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>		  <span class=p>},</span>
</span></span><span class=line><span class=cl>		<span class=p>}).</span><span class=nx>done</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Added : &#39;</span><span class=p>,</span><span class=nx>e</span><span class=p>.</span><span class=nx>detail</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>This particular code uses <code>onAssetCart</code> event from Sprie to POST to <code>/wp-json/wc/store/cart/add-item</code> api from woo commerce to add the item to cart using jQuery&rsquo;s <code>ajax</code> method, which is by default installed in a wordpress setup.</p><h3 id=create-try-now-button-and-trigger-preview>Create &lsquo;Try Now&rsquo; Button and Trigger Preview</h3><p>in <code>functions.php</code>, put the code below :</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-HTML data-lang=HTML><span class=line><span class=cl>add_action( &#39;woocommerce_after_add_to_cart_button&#39;, &#39;add_custom_button&#39;, 10, 0 );
</span></span><span class=line><span class=cl>function add_custom_button() {
</span></span><span class=line><span class=cl>  ?&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>button</span> <span class=na>style</span><span class=o>=</span><span class=s>&#34;display:none&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;sprie-try-single&#34;</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;button&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;btn-atc&#34;</span> <span class=na>onclick</span><span class=o>=</span><span class=s>&#34;SprieSDK.Load(productSku)&#34;</span> <span class=p>&gt;</span> Try Now<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;SprieEvent:onSKUCheck&#34;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>e</span><span class=p>){</span>
</span></span><span class=line><span class=cl>		<span class=kr>const</span> <span class=nx>btn</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s1>&#39;#sprie-try-single&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=nx>productSprieReady</span><span class=p>){</span>
</span></span><span class=line><span class=cl>            <span class=nx>btn</span><span class=p>.</span><span class=nx>style</span><span class=p>.</span><span class=nx>display</span> <span class=o>=</span> <span class=s2>&#34;inline&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span><span class=k>else</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>btn</span><span class=p>.</span><span class=nx>style</span><span class=p>.</span><span class=nx>display</span> <span class=o>=</span> <span class=s2>&#34;none&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=err>&lt;</span>?php
</span></span><span class=line><span class=cl>};
</span></span></code></pre></div><h3 id=after-this>After this</h3><p>We are in the process of creating a plugin which will do all these on your behalf. Once we have completely tested the code, we will announce it and let you know.</p></div></div></div></div></div></div><div class=sub-footer><div class=container><div class=row><div class=col-12><div class=sub-footer-inner><ul><li class=zerostatic><a href=https://www.sprie.io>www.sprie.io</a></li></ul></div></div></div></div></div><script type=text/javascript src=/js/scripts.min.302a6fc365d5139fb98cf60bdb8f715d96257ea189161d36c190ccfa8182e569.js></script></body></html>